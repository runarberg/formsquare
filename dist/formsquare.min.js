!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).formsquare=e()}}(function(){return function u(o,f,l){function a(t,e){if(!f[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(s)return s(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var i=f[t]={exports:{}};o[t][0].call(i.exports,function(e){return a(o[t][1][e]||e)},i,i.exports,u,o,f,l)}return f[t].exports}for(var s="function"==typeof require&&require,e=0;e<l.length;e++)a(l[e]);return a}({1:[function(e,t,r){t.exports=e("./lib/formsquare"),t.exports.NAME="formsquare",t.exports.VERSION="0.7.0"},{"./lib/formsquare":3}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.readFile=function(o){if(!o)return Promise.resolve(null);var r=new FileReader,e=new Promise(function(e,t){r.addEventListener("load",e,!1),r.addEventListener("error",t,!1),r.addEventListener("abort",t,!1)});return r.readAsDataURL(o),e.then(function(e){var t,r,n,i,u=(t=e.target.result,r=t.indexOf(":"),n=t.indexOf(";",r),i=t.indexOf(",",n),{type:t.slice(r+1,n),body:t.slice(i+1)});return{body:u.body,type:u.type,name:o.name}})}},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var p=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],n=!0,i=!1,u=void 0;try{for(var o,f=e[Symbol.iterator]();!(n=(o=f.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){i=!0,u=e}finally{try{!n&&f.return&&f.return()}finally{if(i)throw u}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};r.formsquare=n;var y=e("./utils"),h=e("./files"),m=/^\s*\d+\s*$/;function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(0,y.constant)(!0);if("function"==typeof t)return function(e){return n(e,t)};var v=(0,y.filter)(e,i(t));return(0,y.reduce)(function(e,t){var r=t.name,n=t.type,i=t.value,u=function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return r;var n=t.indexOf("[");var i=t.indexOf("]");if(n<=0&&-1===i)return r.push(t),r;for(;i<n&&-1!==i;)i=t.slice(i).indexOf("]");if(-1===i)return r.push(t),r;if(0<n)return r.push(t.slice(0,n)),e(t.slice(n),r);var u=t.slice(n+1,i);var o=""===u?-1:u.match(m)?+u:u;r.push(o);return e(t.slice(i+1),r)}(r);{if("radio"===n&&!t.checked)return e;if("checkbox"===n&&null===t.getAttribute("value"))i=t.checked;else if("checkbox"!==n||t.checked)i=function(e){if("select-multiple"===e.type)return(0,y.selectedValues)(e);if("number"===e.type||"range"===e.type)return+e.value;if((0,y.contains)(e.getAttribute("type"),["date","datetime-local","month"])){var t=new Date(e.value);return"Invalid Date"===t.toString()?e.value:t}if("week"===e.getAttribute("type"))return function(e){if(!e.match(/^\s*\d+\s*-W\s*\d+\s*$/))return e;var t=e.split("-W"),r=p(t,2),n=r[0],i=r[1];if(n=parseInt(n,10),(i=parseInt(i,10))<=0||53<i)return e;var u=new Date(Date.UTC(n,0,1+7*(i-1))),o=u.getUTCDay(),f=u;o<=4?f.setUTCDate(u.getUTCDate()-u.getUTCDay()+1):f.setUTCDate(u.getUTCDate()+8-u.getUTCDay());if("Invalid Date"===f.toString())return e;return f}(e.value)||e.getAttribute("value");if("file"===e.type)return e.multiple?0===e.files.length?Promise.resolve([]):Promise.all((0,y.map)(h.readFile,e.files)):(0,h.readFile)(e.files[0]);return e.value}(t);else{if(x(u)||(0,y.any)(function(e){return e.name===r&&e!==t},v))return function(e,t){var r=e;if(null===r){if(0===t.length||"number"==typeof t[0])return[];r=Object.create(null)}var n=g(t,r),i=t.slice(-1)[0];0<t.length&&void 0===n[i]&&!x(t)&&(n[i]=[]);return r}(e,u);i=null}}if(0===u.length)return null===e?i:(Array.isArray(e)||(e=[e]),e.push(i),e);e=function(e,t){if(null===e)return"number"==typeof t[0]?[]:Object.create(null);return e}(e,u);var o=g(u,e),f=u.slice(-1)[0],l="number"!=typeof f&&(0,y.any)(function(e){return(0,y.startsWith)(r,e.name)&&e!==t&&e.name.slice(r.length).match(/\[[^\]]\]/)},v);return a=o,s=f,c=i,d=l,s=-1===s?a.length:s,void 0!==a[s]&&null!==a[s]?(Array.isArray(a[s])||(a[s]=[a[s]]),a[s].push(d?{"":c}:c)):(b(a,s),a[s]=d?{"":c}:c),e;var a,s,c,d},null,v)}function i(t){if(t instanceof NodeList||Array.isArray(t))return(0,y.flatMap)(i,t);var e=t.elements;if(!t.id||"function"==typeof window.HTMLFormControlsCollection&&e instanceof window.HTMLFormControlsCollection)return e;var r=document.querySelectorAll('[form="'+t.id+'"]'),n=(0,y.filter)(function(e){return(0,y.contains)(e.getAttribute("form"),["",null,t.id])},e);return(0,y.extendUniq)(n,r)}function g(e,t){if(e.length<=1)return t;var r=e[0],n=e.slice(1),i=-1===r?t.length:r;if(void 0===t[i]){var u="number"==typeof n[0]?[]:Object.create(null);if(Array.isArray(t)&&-1===i)return t.push(u),g(n,u);b(t,i),t[i]=u}return g(n,t[i])}function b(e,t){if(Array.isArray(e)&&"number"==typeof t&&e.length<t)for(var r=e.length;r<t;r+=1)void 0===e[r]&&(e[r]=null)}function x(e){return"number"==typeof e.slice(-1)[0]}r.default=n},{"./files":2,"./utils":4}],4:[function(e,t,r){"use strict";function i(e,t){for(var r=t.length,n=0;n<r;n+=1)if(t[n]===e)return!0;return!1}function n(e,t){for(var r=[],n=t.length,i=0;i<n;i+=1)e(t[i])&&r.push(t[i]);return r}function u(e,t){for(var r=[],n=t.length,i=0;i<n;i+=1)r.push(e(t[i]));return r}function o(e,t,r){for(var n=r.length,i=0;i<n;i+=1)t=e(t,r[i]);return t}Object.defineProperty(r,"__esModule",{value:!0}),r.any=function(e,t){for(var r=t.length,n=0;n<r;n+=1)if(e(t[n]))return!0;return!1},r.constant=function(e){return function(){return e}},r.contains=i,r.extendUniq=function(e,t){for(var r=t.length,n=0;n<r;n+=1)i(t[n],e)||e.push(t[n]);return e},r.filter=n,r.flatMap=function(u,e){return o(function(e,t){for(var r=u(t),n=r.length,i=0;i<n;i+=1)e.push(r[i]);return e},[],e)},r.map=u,r.reduce=o,r.selectedValues=function(e){return u(function(e){return e.value},e.selectedOptions||n(function(e){return e.selected},e.options))},r.startsWith=function(e,t){return t.slice(0,e.length)===e}},{}]},{},[1])(1)});