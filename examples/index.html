<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Formsquare examples</title>
    <style>
      .example output {
        font-family: monospace;
        white-space: pre;
      }
    </style>
  </head>

  <body>
    <h1>Formsquare examples</h1>

    <section id="readme-examples">
      <h2>Readme examples</h2>

      <div class="example" id="readme-example-basic">
        <h3>Basic</h3>
        <form>
          <input name="foo" value="bar">
          <input name="baz" value="quux" disabled>
        </form>

        <output></output>

        <script type="module">
          import formsquare from "/dist/module/formsquare.js";

          const div = document.getElementById("readme-example-basic");
          const form = div.querySelector("form");
          const obj = formsquare(form, el => !el.disabled);
          const output = div.querySelector("output");

          output.textContent = JSON.stringify(obj);
        </script>
      </div>

      <div class="example" id="readme-example-basic-nomodule">
        <h3>Basic (no module)</h3>
        <form>
          <input name="foo" value="bar">
          <input name="baz" value="quux" disabled>
        </form>

        <output></output>

        <!-- See if the iife script works -->
        <script src="/dist/iife/formsquare.js"></script>
        <script>
          {
            const div = document.getElementById("readme-example-basic-nomodule");
            const form = div.querySelector("form");
            const obj = formsquare(form, el => !el.disabled);
            const output = div.querySelector("output");

            output.textContent = JSON.stringify(obj);
          }
        </script>
      </div>

      <div class="example" id="readme-example-curry">
        <h3>Curry</h3>

        <form>
          <input value="foo">
          <input value="bar" disabled>
        </form>

        <form>
          <input value="foo" disabled>
          <input value="bar">
        </form>

        <output></output>

        <script type="module">
          import formsquare from "/dist/module/formsquare.js";

          const div = document.getElementById("readme-example-curry");
          const parseForm = formsquare(el => !el.disabled);

          const forms = div.querySelectorAll("form");
          const output = div.querySelector("output");

          output.textContent = [...forms]
            .map(parseForm)
            .map(JSON.stringify)
            .join("\n");
        </script>
      </div>

      <div class="example" id="readme-example-empty">
        <h3>Empty</h3>

        <form></form>

        <output></output>

        <script type="module">
          import formsquare from "/dist/module/formsquare.js";

          const div = document.getElementById("readme-example-empty");
          const form = div.querySelector("form");
          const obj = formsquare(form);
          const output = div.querySelector("output");

          output.textContent = JSON.stringify(obj);
        </script>
      </div>

      <div class="example" id="readme-example-singleton">
        <h3>Singleton</h3>

        <form>
          <input type="number" value="42">
        </form>

        <output></output>

        <script type="module">
          import formsquare from "/dist/module/formsquare.js";

          const div = document.getElementById("readme-example-singleton");
          const form = div.querySelector("form");
          const output = div.querySelector("output");
          const strings = [];

          strings.push(JSON.stringify(formsquare(form)));

          form[0].type = "text";
          strings.push(JSON.stringify(formsquare(form)));

          output.textContent = strings.join("\n");
        </script>
      </div>

      <div class="example" id="readme-example-checkboxes">
        <h3>Checkboxes</h3>

        <form>
          <input type="checkbox" name="[]">
          <input type="checkbox" name="[]" checked>
        </form>

        <output></output>

        <script type="module">
          import formsquare from "/dist/module/formsquare.js";

          const div = document.getElementById("readme-example-checkboxes");
          const form = div.querySelector("form");
          const output = div.querySelector("output");
          const strings = [];

          strings.push(JSON.stringify(formsquare(form)));

          form[0].value = "false";
          form[1].value = "on"
          strings.push(JSON.stringify(formsquare(form)));

          output.textContent = strings.join("\n");
        </script>
      </div>

      <div class="example" id="readme-example-week">
        <h3>Week</h3>

        <form>
          <input type="week" value="2017-W14">
        </form>

        <output></output>

        <script type="module">
          import formsquare from "/dist/module/formsquare.js";

          const div = document.getElementById("readme-example-week");
          const form = div.querySelector("form");
          const output = div.querySelector("output");
          const string = JSON.stringify(formsquare(form));

          output.textContent = string;
        </script>
      </div>

      <div class="example" id="readme-example-files">
        <h3>Files</h3>

        <form>
          <input type="file" multiple>
        </form>

        <output></output>

        <script type="module">
          import formsquare from "/dist/module/formsquare.js";

          const div = document.getElementById("readme-example-files");
          const form = div.querySelector("form");
          const output = div.querySelector("output");

          formsquare(form).then((data) => {
            output.textContent = JSON.stringify(data);
          });
        </script>
      </div>

      <div class="example" id="readme-example-form-collection">
        <h3>Collections of forms</h3>

        <form>
          <input type="number" name="foo" value="2">
          <input type="number" name="bar" value="5">
        </form>

        <form>
          <input type="number" name="foo" value="42">
        </form>

        <output></output>

        <script type="module">
          import formsquare from "/dist/module/formsquare.js";

          const div = document.getElementById("readme-example-form-collection");
          const forms = div.querySelectorAll("form");
          const output = div.querySelector("output");
          const strings = [];

          strings.push(JSON.stringify(formsquare(forms)));
          strings.push(JSON.stringify([...forms].map(formsquare(() => true))));

          output.textContent = strings.join("\n");
        </script>
      </div>
    </section>
  </body>
</html>
